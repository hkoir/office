{% extends "../base.html" %}
{% load custom_filters %}

{% block content %}

<style>
.account-name { padding-left: 0; }
.level-0 { padding-left: 0px; }
.level-1 { padding-left: 20px; }
.level-2 { padding-left: 40px; }
.level-3 { padding-left: 60px; }
/* Add more levels if needed */

</style>


<div class="container mt-4">  

  <div class="container-fluid main-content py-4">
  <div class="row g-2 justify-content-center text-center">
    <div class="col-auto">
      <a href="{% url 'accounting:balance_sheet' %}" class="btn btn-sm btn-primary w-100">
        Balance Sheet
      </a>
    </div>
    <div class="col-auto">
      <a href="{% url 'accounting:balance_sheet_quarterly' %}" class="btn btn-sm btn-primary w-100">
        Balance Sheet Quarterly
      </a>
    </div>
    <div class="col-auto">
      <a href="{% url 'accounting:trial_balance' %}" class="btn btn-sm btn-primary w-100">
        Trial Balance
      </a>
    </div>
    <div class="col-auto">
      <a href="{% url 'accounting:profit_loss' %}" class="btn btn-sm btn-primary w-100">
        Profit &amp; Loss
      </a>
    </div>
    <div class="col-auto">
      <a href="{% url 'accounting:profit_loss_quarterly' %}" class="btn btn-sm btn-primary w-100">
        Profit &amp; Loss Quarterly
      </a>
    </div>
    <div class="col-auto">
      <a href="{% url 'accounting:journalentry_create' %}" class="btn btn-sm btn-primary w-100">
        Journal Entry
      </a>
    </div>
    <div class="col-auto">
      <a href="{% url 'accounting:journalentry_list' %}" class="btn btn-sm btn-primary w-100">
        Journal Entry List
      </a>
    </div>
    <div class="col-auto">
      <a href="{% url 'accounting:account_create' %}" class="btn btn-sm btn-primary w-100">
        Add Account
      </a>
    </div>
    <div class="col-auto">
      <a href="{% url 'accounting:account_list' %}" class="btn btn-sm btn-primary w-100">
        Account List
      </a>
    </div>
  


     </div>    
  </div>





<h2 class="my-4">Quarterly Balance Sheet</h2>
<div class="table-responsive">
    <table class="table table-bordered table-striped table-sm">
        <thead class="table-dark">
            <tr>
                <th>Account code</th>
                <th>Account</th>
                {% for fy in fiscal_years %}
                    {% for q in quarters %}
                        <th class="text-end">{{ fy.year_start.year }} {{ q }}</th>
                    {% endfor %}
                {% endfor %}
            </tr>
        </thead>
        <tbody>

            {% for node in report_tree %}
                {% include "accounting/account_row_quarterly.html" with node=node level=0 fiscal_years=fiscal_years quarters=quarters %}
            {% endfor %}

            <!-- Retained Earnings -->
            <tr class="fw-bold table-secondary">
                <td colspan="2" class="text-end">Retained Earnings (Net Profit)</td>
                {% for fy in fiscal_years %}
                    {% for q in quarters %}
                        <td class="text-end">
                            {{ totals|dict_get:fy.id|dict_get:q|dict_get:"net_profit"|floatformat:2 }}
                        </td>
                    {% endfor %}
                {% endfor %}
            </tr>

            <!-- Equity (Excluding Net Profit) -->
            <tr class="fw-bold table-light">
                <td colspan="2" class="text-end">Equity (Excl. Net Profit)</td>
                {% for fy in fiscal_years %}
                    {% for q in quarters %}
                        <td class="text-end">
                            {{ totals|dict_get:fy.id|dict_get:q|dict_get:"equity"|floatformat:2 }}
                        </td>
                    {% endfor %}
                {% endfor %}
            </tr>

            <!-- Totals -->
            <tr class="fw-bold table-dark">
                <td colspan="2" class="text-end">Total Assets</td>
                {% for fy in fiscal_years %}
                    {% for q in quarters %}
                        <td class="text-end">
                            {{ totals|dict_get:fy.id|dict_get:q|dict_get:"assets"|floatformat:2 }}
                        </td>
                    {% endfor %}
                {% endfor %}
            </tr>
            <tr class="fw-bold table-dark">
                <td colspan="2" class="text-end">Total Liabilities & Equity</td>
                {% for fy in fiscal_years %}
                    {% for q in quarters %}
                        <td class="text-end">
                            {{ totals|dict_get:fy.id|dict_get:q|dict_get:"liabilities_equity"|floatformat:2 }}
                        </td>
                    {% endfor %}
                {% endfor %}
            </tr>
        </tbody>
    </table>
</div>


</div>
{% endblock %}
