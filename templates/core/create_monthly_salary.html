
{% extends "base.html" %}
{% load static %}
{% load custom_filters %}
{% block content %}



<div class="card shadow-sm my-4">
  <div class="card-header bg-primary text-white text-center">
    <h5 class="mb-0">Core Management Actions</h5>
  </div>

  <div class="card-body">
    <div class="container-fluid text-center">
      <div class="row g-2 justify-content-center">
        
        <div class="col-auto">
          <a href="{% url 'core:home' %}" class="btn btn-success btn-sm">
            <i class="fas fa-home"></i> Home
          </a>
        </div>

        <div class="col-auto">
          <a href="{% url 'core:dashboard' %}" class="btn btn-success btn-sm">
            <i class="fas fa-tachometer-alt"></i> Dashboard
          </a>
        </div>

        <div class="col-auto">
          <a href="{% url 'core:only_core_dashboard' %}" class="btn btn-success btn-sm">
            <i class="fas fa-layer-group"></i> Core Dashboard
          </a>
        </div>

        <div class="col-auto">
          <a href="{% url 'core:basic_database_creation' %}" class="btn btn-success btn-sm">
            <i class="fas fa-database"></i> Basic Database
          </a>
        </div>

        <div class="col-auto">
          <a href="{% url 'core:view_employee' %}" class="btn btn-success btn-sm">
            <i class="fas fa-user"></i> View Employee
          </a>
        </div>

        <div class="col-auto">
          <a href="{% url 'core:employee_list' %}" class="btn btn-success btn-sm">
            <i class="fas fa-users"></i> Employee List
          </a>
        </div>

        <div class="col-auto">
          <a href="{% url 'core:manage_department' %}" class="btn btn-success btn-sm">
            <i class="fas fa-sitemap"></i> Create Department
          </a>
        </div>

        <div class="col-auto">
          <a href="{% url 'core:create_position' %}" class="btn btn-success btn-sm">
            <i class="fas fa-briefcase"></i> Create Designation
          </a>
        </div>

        <div class="col-auto">
          <a href="{% url 'core:create_job_requirement' %}" class="btn btn-success btn-sm">
            <i class="fas fa-tasks"></i> Job Requirement
          </a>
        </div>

        <div class="col-auto">
          <a href="{% url 'core:create_job_description' %}" class="btn btn-success btn-sm">
            <i class="fas fa-file-alt"></i> Job Description
          </a>
        </div>

        <div class="col-auto">
          <a href="{% url 'core:create_company' %}" class="btn btn-success btn-sm">
            <i class="fas fa-building"></i> Create Company
          </a>
        </div>

        <div class="col-auto">
          <a href="{% url 'core:manage_location' %}" class="btn btn-success btn-sm">
            <i class="fas fa-map-marker-alt"></i> Company Location
          </a>
        </div>

        <div class="col-auto">
          <a href="{% url 'core:manage_employee' %}" class="btn btn-success btn-sm">
            <i class="fas fa-user-plus"></i> Enroll Employee
          </a>
        </div>

        <div class="col-auto">
          <a href="{% url 'core:create_salary_structure' %}" class="btn btn-success btn-sm">
            <i class="fas fa-file-invoice-dollar"></i> Salary Structure
          </a>
        </div>

        <div class="col-auto">
          <a href="{% url 'core:create_company_policy' %}" class="btn btn-success btn-sm">
            <i class="fas fa-scroll"></i> Company Policy
          </a>
        </div>

        <div class="col-auto">
          <a href="{% url 'core:create_festival' %}" class="btn btn-success btn-sm">
            <i class="fas fa-gift"></i> Festival Bonus
          </a>
        </div>

        <div class="col-auto">
          <a href="{% url 'core:create_performance_bonus' %}" class="btn btn-success btn-sm">
            <i class="fas fa-chart-line"></i> Performance Bonus
          </a>
        </div>

        <div class="col-auto">
          <a href="{% url 'core:view_employee_changes' %}" class="btn btn-success btn-sm">
            <i class="fas fa-history"></i> Employee History
          </a>
        </div>

        <div class="col-auto">
          <a href="{% url 'core:create_salary' %}" class="btn btn-success btn-sm">
            <i class="fas fa-coins"></i> Payroll
          </a>
        </div>

      </div>
    </div>
  </div>
</div>



<div class="container-fluid main-content">
    
<h4 style="margin-top:30px">Monthly Salary Sheet - {{ month }}/{{ year }}</h4>
    <div class="row row-cols-1">
        <div class="col">
            
            <form method="GET" action="{% url 'core:create_salary' %}">
                <label for="month">Enter month:</label>
                <input type="number" id="month" name="month" min="1" max="12" required>
                
                <label for="year">Enter year:</label>
                <input type="number" id="year" name="year" min="2000" max="2100" required>
                
                <button type="submit" class="btn btn-primary">Generate Report</button>
            </form>
            

        </div>
        <div class="co-12 table-responsivel">
            
            <h4>Generated Report for {{ month }}/{{ year }}</h4> 
                        
         {% if salary %}
                    <table class="table table-hover">
                        <thead class="table-dark">
                            <a href="{% url 'core:download_salary' %}?month={{ month }}&year={{ year }}">Download Salary Report</a>

                            <tr>
                                <th>Employee ID</th>
                                <th>Name</th>
                                <th>Month</th>
                                <th>Year</th>                              
                                <th>Basic</th>
                                <th>House allowance</th>
                                <th>Conveyance allowance</th>
                                <th>Medical allowance</th>

                                <th>Festival allowance</th>
                                <th>Performance allowance</th>
                                <th>Gross Salary</th>
                               
                            </tr>
                        </thead>
                        <tbody>
                            {% for entry in salary %}
                                <tr>
                                    <td>{{ entry.employee.employee_code }}</td>
                                    <td>{{ entry.employee.name }}</td>
                                    <td>{{ entry.month }}</td>
                                    <td>{{ entry.year }}</td>                                   
                                    <td>{{ entry.employee.salary_structure.basic_salary|add_commas }}</td>
                                    <td>{{ entry.employee.salary_structure.hra|add_commas}}</td>
                                    <td>{{ entry.employee.salary_structure.conveyance_allowance|add_commas }}</td>
                                    <td>{{ entry.employee.salary_structure.medical_allowance|add_commas }}</td>
                                    <td>{{ entry.employee.salary_structure.festival_allowance|add_commas }}</td>
                                    <td>{{ entry.employee.salary_structure.performance_bonus|add_commas }}</td>
                                    <td>{{ entry.employee.salary_structure.gross_salary }}</td>
                                </tr>
                            {% endfor %}
                        </tbody>
                    </table>
                {% else %}
                    <p>No salary data found for the selected month and year.</p>
                {% endif %}


                </div>


    </div>

</div>




{% endblock %}